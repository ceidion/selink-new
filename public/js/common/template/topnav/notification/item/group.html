<%
    var icon,
        content,
        groupName = obj.targetGroup.name;

    if (obj.type == "group-new") {
        icon = "fa-group blue bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>を立ち上げました";
    }
    else if (obj.type == "group-invited") {
        icon = "fa-ticket red bigger-110";
        content = "あなたをグループ<strong>「" + groupName + "」</strong>に招待しました";
    }
    else if (obj.type == "group-expeled") {
        icon = "fa-frown-o purple bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>から退会されました";
    }
    else if (obj.type == "group-joined") {
        icon = "fa-sign-in green bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>に参加しました";
    }
    else if (obj.type == "group-refused") {
        icon = "fa-sign-out purple bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>の招待を拒否しました";
    }
    else if (obj.type == "group-applied") {
        icon = "fa-calendar-o blue bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>を参加申請しました";
    }
    else if (obj.type == "group-approved") {
        icon = "fa-smile-o green bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>の参加申請を承認しました";
    }
    else if (obj.type == "group-declined") {
        icon = "fa-frown-o purple bigger-110";
        content = "グループ<strong>「" + groupName + "」</strong>の参加申請を拒否しました";
    }
%>

<a href="#group/<%= obj.targetGroup._id %>">
    <img src="<%= obj._from.photo %>" class="msg-photo">
    <span class="msg-body">
        <span class="msg-title">
            <span class="msg-time pull-right">
                <i class="ace-icon fa fa-clock-o"></i>&nbsp;<span><% print(moment(obj.createDate).fromNow()) %></span>
            </span>
            <strong>
                <span class="blue">
                    <%= obj._from.firstName %>&nbsp;
                    <%= obj._from.lastName %>&nbsp;
                </span>
            </strong>
            <div class="space-2"></div>
            <i class="ace-icon fa <%= icon %>"></i>
            <%= content %>
        </span>
        <span class="msg-time">
            <% if (obj.type == "group-invited") { %>
                <div class="pull-right">
                    <button class="btn btn-minier btn-pink btn-refuse"><i class="ace-icon fa fa-times"></i>&nbsp;拒否</button>
                    <button class="btn btn-minier btn-success btn-join"><i class="ace-icon fa fa-check"></i>&nbsp;参加</button>
                </div>
            <% } else if (obj.type == "group-applied") { %>
                <div class="pull-right">
                    <button class="btn btn-minier btn-pink btn-decline"><i class="ace-icon fa fa-times"></i>&nbsp;拒否</button>
                    <button class="btn btn-minier btn-success btn-approve"><i class="ace-icon fa fa-check"></i>&nbsp;承認</button>
                </div>
            <% } else { %>
                <button class="btn btn-minier btn-info btn-acknowledge pull-right"><i class="ace-icon fa fa-check"></i>&nbsp;了解</button>
            <% } %>
        </span>
    </span>
</a>